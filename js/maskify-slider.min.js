(function(a){a.fn.Maskify=function(b){function d(a){var b=["transition","WebkitTransition","msTransition","MozTransition","OTransition"],c;while(b.length){c=b.shift();if(a[0].style[c]!=undefined){return c}}}var c=a.extend({canvas:[],marginTop:0,slider:true,delay:5e3,transitionLength:1e3,cssTransition:true},b);return this.each(function(){function m(a){var b=setInterval(function(){q()},a);return b}function n(){a.each(e,function(b,c){var d=a(this),e=a("<img>");d.append(e);g.push(e);e.addClass("item-"+(b+1));h+=1});f.css("display","none");p()}function o(a){i=a.eq(0).width();j=a.eq(0).height()}function p(){o(e);var b=0,f=c.cssTransition?false:true,j=f?d(g[0]):null;a.each(g,function(a,d){var e=d;b+=a!==0?parseInt(e.css("margin-left")+e.css("margin-right"),10):0;if(f)e.get(0).style[j]="none";e.css({"margin-left":-i*h/h*a-b+"px","margin-top":c.marginTop?-c.marginTop+"px":0})});s(k)}function q(){k=k<f.length-1?k+=1:0;s(k)}function r(){k=k!==0?k-=1:f.length-1;s(k)}function s(a){var b=g.slice(0);(function d(e){if(c.cssTransition===true){setTimeout(function(){e.removeClass("showUp").addClass("fadeOut");setTimeout(function(){e.attr("src",f.eq(a).attr("src"));e.addClass("showUp")},c.transitionLength);if(b.length)d(b.shift())},250)}else{e.fadeOut(function(){setTimeout(function(){e.attr("src",f.eq(a).attr("src")).fadeIn();if(b.length)d(b.shift())},250)})}})(b.shift())}var b=a(this),e=b.find(c.canvas),f=b.find("img"),g=[],h=0,i=0,j=0,k=0,l=c.slider?m(c.delay):null;n()})}})(jQuery)