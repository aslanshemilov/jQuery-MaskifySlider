(function(e){e.fn.Maskify=function(t){function r(e){var t=["transition","WebkitTransition","msTransition","MozTransition","OTransition"],n;while(t.length){n=t.shift();if(e[0].style[n]!=undefined){return n}}}var n=e.extend({canvas:[],marginTop:0,slider:true,delay:5e3,transitionLength:1e3,cssTransition:true,percentage:false},t);return this.each(function(){function c(e){var t=setInterval(function(){v()},e);return t}function h(){e.each(i,function(t,n){var r=e(this),i=e("<img>");r.append(i);o.push(i);i.addClass("item-"+(t+1));u+=1});s.css("display","none");d()}function p(e){var t=e.eq(0).width(),n=e.eq(0).height();return{width:t,height:n}}function d(){var t=p(i);var s=0,l=0,c=n.cssTransition?false:true,h=c?r(o[0]):null;e.each(o,function(e,r){var i=r;s+=e!==0?parseInt(i.css("margin-left")+i.css("margin-right"),10):0;if(c){i.get(0).style[h]="none"}if(!n.percentage){l=-t.width*u/u*e-s+f}else{l=-100*e+"%"}i.css({"margin-left":l,"margin-top":n.marginTop?-n.marginTop+f:0})});g(a)}function v(){a=a<s.length-1?a+=1:0;g(a)}function m(){a=a!==0?a-=1:s.length-1;g(a)}function g(e){var t=o.slice(0);(function r(i){if(n.cssTransition===true){setTimeout(function(){i.removeClass("showUp").addClass("fadeOut");setTimeout(function(){i.attr("src",s.eq(e).attr("src"));i.addClass("showUp")},n.transitionLength);if(t.length)r(t.shift())},250)}else{i.fadeOut(function(){setTimeout(function(){i.attr("src",s.eq(e).attr("src")).fadeIn();if(t.length)r(t.shift())},250)})}})(t.shift())}var t=e(this),i=t.find(n.canvas),s=t.find("img"),o=[],u=0,a=0,f=n.percentage?"%":"px",l=n.slider?c(n.delay):null;h()})}})(jQuery)